{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","app.js","index.js"],"names":["Filter","handleSearchOption","onChange","PersonForm","props","onSubmit","addPerson","handleNameChange","value","newName","handleNumberChange","newNumber","type","Persons","phoneBook","handleDeletion","map","person","key","name","number","id","onClick","Notification","notification","notificationStyle","whiteSpace","opacity","width","padding","margin","marginLeft","style","error","color","fontSize","backgroundColor","border","message","baseUrl","errorPerson","axios","get","then","res","data","concat","personObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","searchOption","setSearchOption","searchResult","setSearchResult","notificationMessage","setNotificationMessage","useEffect","personService","initialPersons","clear","setNotification","setTimeout","setNotificationForValidationErrors","errMessage","length","join","handleUpdate","window","confirm","returnedPerson","Error","filteredPhonebook","filter","p","catch","err","response","e","target","result","toLowerCase","includes","trim","preventDefault","existingPerson","find","isNaN","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.20953e68.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ handleSearchOption }) => {\r\n  return (\r\n    <>\r\n    filter shown with: <input onChange={handleSearchOption}/> \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n  return(\r\n    <form onSubmit={props.addPerson}>\r\n      <div>\r\n        name: <input onChange={props.handleNameChange} value={props.newName}/>\r\n      </div>\r\n      <div>\r\n        number: <input onChange={props.handleNumberChange} value={props.newNumber}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nconst Persons = ({ phoneBook, handleDeletion }) => {\r\n  return (\r\n    phoneBook.map(person => {\r\n      return (\r\n        <div key={person.name}>\r\n          {person.name} {person.number}\r\n          <button key={person.id} onClick={() => { handleDeletion(person.name, person.id) } }>Delete</button>\r\n        </div>\r\n      )\r\n    })\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ notification }) => {\r\n    const notificationStyle = {\r\n        whiteSpace: 'pre-wrap',\r\n        opacity: 0.8,\r\n        width: '50%',\r\n        padding: 5,\r\n        margin: 10,\r\n        marginLeft: 0\r\n    }\r\n    const messageStyle = {\r\n        color: 'grey', \r\n        fontSize: '1.1rem',\r\n        backgroundColor: 'lightblue'\r\n    }\r\n    const errorStyle = {\r\n        color: 'red', \r\n        fontSize: '1.1rem',\r\n        backgroundColor: 'lightgrey',\r\n        border: '2px solid red'\r\n    }\r\n\r\n    if (notification === null) return null\r\n\r\n    return (\r\n        <div style={ notification.error ? \r\n                {...notificationStyle, ...errorStyle} : \r\n                {...notificationStyle, ...messageStyle} \r\n            }>\r\n            {notification.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const errorPerson = {\r\n        id: \"5f456167e3476f29d0ffdb5a\",\r\n        name: \"Error\",\r\n        number: \"00000000\"\r\n      }\r\n    return axios\r\n        .get(baseUrl)\r\n        .then(res => res.data.concat(errorPerson))\r\n}\r\nconst create = personObject => {\r\n    return axios\r\n        .post(baseUrl, personObject)\r\n        .then(res => res.data)\r\n}\r\nconst updatePerson = (personObject, id) => {\r\n    return axios\r\n        .put(`${baseUrl}/${id}`, personObject)\r\n        .then(res => res.data)\r\n}\r\nconst deletePerson = id => {\r\n    return axios\r\n        .delete(`${baseUrl}/${id}`)\r\n        .then(res => res.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    updatePerson,\r\n    deletePerson\r\n}","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchOption, setSearchOption ] = useState('')\r\n  const [ searchResult, setSearchResult ] = useState(persons)\r\n  const [notificationMessage, setNotificationMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, []);\r\n\r\n  // check if name and number are not empty strings\r\n  const nameAndNumExist = () => {\r\n    if (!newName || !newNumber || isNaN(newNumber)) {\r\n      return alert(`Name or number is not specified or number is in wrong format`)\r\n    }\r\n    return true\r\n  }\r\n  \r\n  // clears name and number inputs\r\n  const clear = () => {\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n  const addPerson = (e) => {\r\n    e.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber \r\n    }\r\n    // check if there is already a person with the same name\r\n    // if so, update and return\r\n    const exists = persons.filter(person => person.name.toLowerCase() === newName.toLowerCase())\r\n    if (exists.length > 0) {\r\n      const existingPerson = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\r\n      handleUpdate({...existingPerson, number: newNumber}, existingPerson.id)\r\n      return\r\n    }\r\n    // if name and number are ok, add person to the phonebook\r\n    if (nameAndNumExist()) { \r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          clear()\r\n          const notification = {\r\n            message: `Added ${personObject.name}`, \r\n            error: false\r\n          }\r\n          setNotification(notification)\r\n        })\r\n        .catch(err => {\r\n          setNotificationForValidationErrors(err.response.data.error)\r\n        })\r\n    }\r\n  }\r\n\r\n  function setNotification(notification) {\r\n    setNotificationMessage(notification)\r\n    setTimeout(() => {\r\n      setNotificationMessage(null)\r\n    }, 5000)\r\n  }\r\n\r\n  function setNotificationForValidationErrors(errMessage) {\r\n    const notification = {\r\n      message: errMessage.length > 1 ? errMessage.join('\\n') : errMessage,\r\n      error: true\r\n    }\r\n    setNotification(notification)\r\n  }\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value)\r\n  }\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value)\r\n  }\r\n  const handleSearchOption = (e) => {\r\n    setSearchOption(e.target.value)\r\n\r\n    // search in array of persons' names with input value\r\n    const result = persons.filter( \r\n      person => person.name\r\n        .toLowerCase()\r\n        .includes(\r\n          e.target.value\r\n          .toLowerCase()\r\n          .trim()\r\n        )\r\n    );\r\n    setSearchResult(result);\r\n  }\r\n  const handleUpdate = (personObject, id) => {\r\n    if (window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)) {\r\n      personService\r\n        .updatePerson(personObject, id)\r\n        .then(returnedPerson => {\r\n            if (!returnedPerson) throw new Error(`${personObject.name} has already been removed from server.`)\r\n\r\n            const filteredPhonebook = persons.filter(p => p.id !== id)\r\n            setPersons(filteredPhonebook.concat(returnedPerson))\r\n            clear()\r\n            const notification = {\r\n              message: `${returnedPerson.name} updated`, \r\n              error: false\r\n            }\r\n            setNotification(notification)\r\n        })\r\n        .catch(err => {\r\n          if (err.response) {\r\n            return setNotificationForValidationErrors(err.response.data.error)\r\n          }\r\n          const filteredPhonebook = persons.filter(p => p.id !== id)\r\n          setPersons(filteredPhonebook)\r\n          clear()\r\n          const notification = {\r\n            message: err.message,   \r\n            error: true\r\n          }\r\n          setNotification(notification)\r\n        })\r\n    }\r\n  }\r\n  const handleDeletion = (name, id) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(() => {\r\n          const filteredPhonebook = persons.filter(p => p.id !== id)\r\n          setPersons(filteredPhonebook)\r\n        })\r\n    }\r\n  }\r\n  // if input field for searching is empty, show all persons\r\n  const phoneBook = searchOption ? searchResult : persons\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification notification={notificationMessage}/>\r\n      <Filter handleSearchOption={handleSearchOption} />\r\n      <h2>add a new</h2>\r\n      <PersonForm \r\n        addPerson={addPerson} \r\n        handleNameChange={handleNameChange} \r\n        handleNumberChange={handleNumberChange} \r\n        newName={newName} \r\n        newNumber={newNumber} \r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons phoneBook={phoneBook} handleDeletion={handleDeletion}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}